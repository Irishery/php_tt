# URL Shortener

Простой сервис сокращения URL на PHP с MariaDB и Docker.


## Описание

- Генерация коротких ссылок из длинных URL  
- Хранение в MariaDB  
- Перенаправление с короткой ссылки на оригинал  
- Миграции для создания таблиц  
- Запуск и обновление через Docker Compose и bash-скрипт  


## Требования

- Docker  
- Docker Compose  
- Bash (для запуска скрипта)  


## Быстрый старт

1. Клонируйте репозиторий и перейдите в папку проекта:

   ```bash
   git clone https://github.com/Irishery/php_tt
   cd php_tt


2. Запустите установочный скрипт:

   ```bash
   ./up.sh
   ```

   Скрипт выполнит:

   * Остановит и удалит старые контейнеры с данными
   * Пересоберёт образы без кеша
   * Запустит контейнеры в фоне
   * Подождёт готовности MariaDB
   * Проверит подключение из PHP-контейнера
   * Применит миграции
   * Выведет ссылку на приложение

3. Откройте в браузере:

   ```
   http://localhost:8000
   ```

4. Введите URL для сокращения и получите короткую ссылку.


## Структура проекта

* `/app` — код PHP (контроллеры, модели, ядро, миграции)
* `/app/migrations` — SQL миграции
* `/config` — настройки подключения к БД
* `/docker` — Dockerfile для PHP
* `docker-compose.yml` — конфигурация сервисов
* `setup.sh` — автоматический скрипт запуска и миграций


## Маршруты

| Метод | URL         | Описание                          |
| ----- | ----------- | --------------------------------- |
| GET   | `/`         | Форма ввода URL                   |
| POST  | `/shorten`  | Создать короткую ссылку           |
| GET   | `/r/{code}` | Перенаправить на оригинальный URL |


## Схема БД
https://drive.google.com/file/d/1F2IGthCdVf5Yiol2nMqpCiwZ15kU2esm/view?usp=sharing

